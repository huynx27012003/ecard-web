<!DOCTYPE html>
<html lang="vi">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<title>Dashboard - AT Digital Card</title>

	<!-- Favicon -->
	<link rel="shortcut icon" href="/public/assets/icon.ico">

	<!-- Fonts -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="/public/assets/admin/plugins/bootstrap/css/bootstrap.min.css">

	<!-- Feathericon CSS -->
	<link rel="stylesheet" href="/public/assets/admin/plugins/feather/feather.css">

	<!-- Fontawesome CSS -->
	<link rel="stylesheet" href="/public/assets/admin/plugins/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="/public/assets/admin/plugins/fontawesome/css/all.min.css">

	<!-- Main CSS -->
	<link rel="stylesheet" href="/public/assets/admin/css/style.css">

	<style>
		:root {
			--primary-blue: #012596;
			--primary-blue-dark: #011d78;
			--accent-red: #CC0514;
			--text-dark: #1a1a2e;
			--text-muted: #6b7280;
			--bg-light: #f8faff;
			--border-color: #e5e7eb;
			--success: #10b981;
		}

		body {
			font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
			background: var(--bg-light);
		}

		.page-wrapper {
			margin-left: 240px;
			padding-top: 70px;
			min-height: 100vh;
			transition: all 0.3s ease;
		}

		@media (max-width: 991px) {
			.page-wrapper {
				margin-left: 0;
			}
		}

		/* Stats Cards */
		.stats-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: 20px;
			margin-bottom: 30px;
		}

		.stat-card {
			background: white;
			border-radius: 16px;
			padding: 24px;
			display: flex;
			align-items: center;
			gap: 16px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
			border: 1px solid var(--border-color);
			transition: all 0.3s ease;
		}

		.stat-card:hover {
			transform: translateY(-4px);
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
		}

		.stat-icon {
			width: 56px;
			height: 56px;
			border-radius: 14px;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 24px;
		}

		.stat-icon.users {
			background: rgba(1, 37, 150, 0.1);
			color: var(--primary-blue);
		}

		.stat-icon.templates {
			background: rgba(16, 185, 129, 0.1);
			color: var(--success);
		}

		.stat-icon.cards {
			background: rgba(245, 158, 11, 0.1);
			color: #f59e0b;
		}

		.stat-icon.companies {
			background: rgba(204, 5, 20, 0.1);
			color: var(--accent-red);
		}

		.stat-info h3 {
			font-size: 28px;
			font-weight: 700;
			color: var(--text-dark);
			margin: 0;
		}

		.stat-info p {
			font-size: 13px;
			color: var(--text-muted);
			margin: 0;
		}

		/* Quick Actions */
		.quick-actions {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
			gap: 16px;
			margin-bottom: 30px;
		}

		.action-btn {
			display: flex;
			align-items: center;
			gap: 12px;
			padding: 16px 20px;
			background: white;
			border: 1px solid var(--border-color);
			border-radius: 12px;
			text-decoration: none;
			color: var(--text-dark);
			font-weight: 500;
			transition: all 0.2s ease;
		}

		.action-btn:hover {
			border-color: var(--primary-blue);
			color: var(--primary-blue);
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(1, 37, 150, 0.1);
		}

		.action-btn i {
			font-size: 18px;
			color: var(--primary-blue);
		}

		/* Recent Users Table */
		.card-custom {
			background: white;
			border-radius: 16px;
			box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
			border: 1px solid var(--border-color);
			overflow: hidden;
		}

		.card-header-custom {
			padding: 20px 24px;
			border-bottom: 1px solid var(--border-color);
			display: flex;
			align-items: center;
			justify-content: space-between;
		}

		.card-header-custom h5 {
			font-size: 16px;
			font-weight: 600;
			color: var(--text-dark);
			margin: 0;
		}

		.table-responsive {
			padding: 0 24px 24px;
		}

		.table {
			margin-bottom: 0;
		}

		.table thead th {
			font-size: 12px;
			font-weight: 600;
			text-transform: uppercase;
			color: var(--text-muted);
			border-bottom: 1px solid var(--border-color);
			padding: 16px 12px;
		}

		.table tbody td {
			padding: 16px 12px;
			vertical-align: middle;
			border-bottom: 1px solid var(--border-color);
			color: var(--text-dark);
		}

		.table tbody tr:last-child td {
			border-bottom: none;
		}

		.user-avatar-sm {
			width: 36px;
			height: 36px;
			border-radius: 10px;
			background: var(--primary-blue);
			color: white;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			font-weight: 600;
			font-size: 14px;
			margin-right: 12px;
		}

		/* Welcome Section */
		.welcome-section {
			margin-bottom: 30px;
		}

		.welcome-section h2 {
			font-size: 24px;
			font-weight: 700;
			color: var(--text-dark);
			margin-bottom: 4px;
		}

		.welcome-section p {
			color: var(--text-muted);
			margin: 0;
		}

		/* Footer */
		.page-footer {
			position: fixed;
			bottom: 16px;
			right: 24px;
			font-size: 12px;
			color: var(--text-muted);
		}
	</style>
</head>

<body>

	<!-- Main Wrapper -->
	<div class="main-wrapper">

		<!-- Header -->
		<%- include('header.ejs') %>
			<!-- /Header -->

			<!-- Sidebar -->
			<%- include('sidebar.ejs') %>
				<!-- /Sidebar -->

				<!-- Page Wrapper -->
				<div class="page-wrapper">
					<div class="content container-fluid">

						<!-- Welcome Section -->
						<div class="welcome-section">
							<h2>Xin ch√†o, <%= loggedInUser ? loggedInUser.username : 'Admin' %>! üëã</h2>
							<p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi b·∫£ng ƒëi·ªÅu khi·ªÉn AT Digital Card</p>
						</div>

						<!-- Stats Grid -->
						<div class="stats-grid">
							<div class="stat-card">
								<div class="stat-icon users">
									<i class="fas fa-users"></i>
								</div>
								<div class="stat-info">
									<h3>
										<%= typeof stats !=='undefined' ? stats.users : 0 %>
									</h3>
									<p>Ng∆∞·ªùi d√πng</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon templates">
									<i class="fas fa-palette"></i>
								</div>
								<div class="stat-info">
									<h3>
										<%= typeof stats !=='undefined' ? stats.templates : 0 %>
									</h3>
									<p>M·∫´u thi·∫øt k·∫ø</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon cards">
									<i class="fas fa-id-card"></i>
								</div>
								<div class="stat-info">
									<h3>
										<%= typeof stats !=='undefined' ? stats.cards : 0 %>
									</h3>
									<p>Danh thi·∫øp ƒë√£ t·∫°o</p>
								</div>
							</div>

							<div class="stat-card">
								<div class="stat-icon companies">
									<i class="fas fa-building"></i>
								</div>
								<div class="stat-info">
									<h3>
										<%= typeof stats !=='undefined' ? stats.companies : 0 %>
									</h3>
									<p>C√¥ng ty</p>
								</div>
							</div>
						</div>

						<!-- Quick Actions -->
						<div class="quick-actions">
							<a href="/create-card" class="action-btn">
								<i class="fas fa-plus-circle"></i>
								T·∫°o danh thi·∫øp m·ªõi
							</a>
							<a href="/user" class="action-btn">
								<i class="fas fa-user-cog"></i>
								Qu·∫£n l√Ω ng∆∞·ªùi d√πng
							</a>
							<a href="/employee-list" class="action-btn">
								<i class="fas fa-users-cog"></i>
								Danh s√°ch nh√¢n vi√™n
							</a>
							<a href="/companies-list" class="action-btn">
								<i class="fas fa-building"></i>
								Qu·∫£n l√Ω c√¥ng ty
							</a>
						</div>

						<!-- Recent Users -->
						<div class="card-custom">
							<div class="card-header-custom">
								<h5>Ng∆∞·ªùi d√πng g·∫ßn ƒë√¢y</h5>
								<a href="/user" style="font-size: 13px; color: var(--primary-blue);">Xem t·∫•t c·∫£ ‚Üí</a>
							</div>
							<div class="table-responsive">
								<table class="table">
									<thead>
										<tr>
											<th>Ng∆∞·ªùi d√πng</th>
											<th>Email</th>
											<th>S·ªë ƒëi·ªán tho·∫°i</th>
											<th>H√†nh ƒë·ªông</th>
										</tr>
									</thead>
									<tbody>
										<% if (typeof recentUsers !=='undefined' && recentUsers.length> 0) { %>
											<% recentUsers.forEach(user=> { %>
												<tr>
													<td>
														<span class="user-avatar-sm">
															<%= user.username.charAt(0).toUpperCase() %>
														</span>
														<%= user.username %>
													</td>
													<td>
														<%= user.email %>
													</td>
													<td>
														<%= user.number %>
													</td>
													<td>
														<a href="/card/<%= user.username %>" target="_blank"
															class="btn btn-sm btn-outline-primary">
															Xem Card
														</a>
													</td>
												</tr>
												<% }); %>
													<% } else { %>
														<tr>
															<td colspan="4" class="text-center text-muted py-4">
																Ch∆∞a c√≥ ng∆∞·ªùi d√πng n√†o
															</td>
														</tr>
														<% } %>
									</tbody>
								</table>
							</div>
						</div>

						<!-- Footer -->
						<div class="page-footer">
							¬© 2025 AT Energy JSC. All rights reserved.
						</div>
					</div>
				</div>
				<!-- /Page Wrapper -->

	</div>
	<!-- /Main Wrapper -->

	<!-- jQuery -->
	<script src="/public/assets/admin/js/jquery-3.6.0.min.js"></script>

	<!-- Bootstrap Core JS -->
	<script src="/public/assets/admin/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

	<!-- Feather Icon JS -->
	<script src="/public/assets/admin/js/feather.min.js"></script>

	<!-- Custom JS -->
	<script src="/public/assets/admin/js/script.js"></script>

</body>

</html>